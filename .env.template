# MAIE (Modular Audio Intelligence Engine) Environment Configuration
#
# This template file contains all required and optional environment variables
# for configuring the MAIE system. Copy this file to .env and fill in your
# actual values. Do not commit your .env file to version control.
#
# Reference: TDD Section 3.1, 3.2, 3.3.1, 3.6, 3.7
# Security: Keep actual secrets secure and never commit to repository

# ============================================================================
# CORE API & AUTHENTICATION
# ============================================================================

# API authentication key for MAIE services
# Reference: TDD Section 3.1
SECRET_API_KEY=your_secret_api_key_here

# API server host
API_HOST=0.0.0.0

# API server port
API_PORT=8000

# Pipeline version for NFR-1
PIPELINE_VERSION=1.0.0

# Environment (development/production)
ENVIRONMENT=development

# Maximum upload size in MB
MAX_FILE_SIZE_MB=500

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================

# Redis connection URL for task queues and data storage
REDIS_URL=redis://redis:6379/0

# Redis DB for task results
REDIS_RESULTS_DB=1

# Maximum queue depth for backpressure management
# Reference: NFR-5
MAX_QUEUE_DEPTH=1000

# ============================================================================
# AUDIO PROCESSING
# ============================================================================

# Whisper model variant for audio transcription
# Default: erax-wow-turbo (TDD Section 3.3.1)
# Supported: large-v3, turbo, distil-large-v3, custom CT2 models
WHISPER_MODEL_VARIANT=erax-wow-turbo

# Whisper beam size for decoding
WHISPER_BEAM_SIZE=5

# Enable VAD filtering
WHISPER_VAD_FILTER=true

# VAD minimum silence duration (ms)
WHISPER_VAD_MIN_SILENCE_MS=500

# VAD speech padding (ms)
WHISPER_VAD_SPEECH_PAD_MS=400

# Device for whisper computation (cuda, cpu, auto)
WHISPER_DEVICE=cuda

# CTranslate2 compute type (float16, int8_float16, int8)
WHISPER_COMPUTE_TYPE=float16

# Enable CPU fallback if CUDA fails
WHISPER_CPU_FALLBACK=true

# Use previous text as context (set false for Distil-Whisper)
WHISPER_CONDITION_ON_PREVIOUS_TEXT=False

# Force specific language code (e.g., 'en', 'vi') or leave empty for auto-detect
WHISPER_LANGUAGE=

# CPU thread count for performance (recommended: CPU cores / 2)
# Critical for consistent CPU performance
OMP_NUM_THREADS=4

# Directory for uploaded audio files
AUDIO_DIR=data/audio

# ============================================================================
# LLM CONFIGURATION
# ============================================================================

# LLM model identifier
LLM_MODEL_NAME=cpatonn/Qwen3-4B-Instruct-2507-AWQ-4bit

# GPU memory utilization for vLLM (0.1 to 1.0)
LLM_GPU_MEMORY_UTILIZATION=0.9

# Maximum context length
LLM_MAX_MODEL_LEN=32768

# LLM sampling temperature (0.0 to 2.0)
LLM_TEMPERATURE=0.3

# Nucleus sampling threshold (0.0 to 1.0)
LLM_TOP_P=0.9

# Top-k sampling (positive integer)
LLM_TOP_K=20

# Maximum tokens to generate
LLM_MAX_TOKENS=4096

# ============================================================================
# FILE PATHS
# ============================================================================

# Model weights directory
MODELS_DIR=data/models

# JSON schema templates directory
TEMPLATES_DIR=templates

# Jinja chat templates directory
CHAT_TEMPLATES_DIR=assets/chat-templates

# ============================================================================
# WORKER SETTINGS
# ============================================================================

# Worker identifier
WORKER_NAME=maie-worker

# Job timeout in seconds
JOB_TIMEOUT=600

# Result retention in seconds (24h)
RESULT_TTL=86400

# ============================================================================
# CLEANUP & MAINTENANCE
# ============================================================================

# Audio cleanup interval in seconds (default: 3600 = 1 hour)
CLEANUP_AUDIO_INTERVAL=3600

# Log cleanup interval in seconds (default: 86400 = 24 hours)
CLEANUP_LOG_INTERVAL=86400

# Cache cleanup interval in seconds (default: 1800 = 30 minutes)
CLEANUP_CACHE_INTERVAL=1800

# Disk monitoring interval in seconds (default: 300 = 5 minutes)
CLEANUP_DISK_MONITOR_INTERVAL=300

# Days to keep audio files (default: 7)
CLEANUP_AUDIO_RETENTION_DAYS=7

# Days to keep log files (default: 7)
CLEANUP_LOGS_RETENTION_DAYS=7

# Disk usage threshold percentage for alerts (default: 80)
CLEANUP_DISK_THRESHOLD_PCT=80

# Enable automatic emergency cleanup on disk alerts (default: false)
CLEANUP_EMERGENCY_CLEANUP=false

# Directory to monitor for disk usage (default: .)
CLEANUP_CHECK_DIR=.

# ============================================================================
# DEVELOPMENT & DEBUGGING
# ============================================================================

# Enable debug logging
DEBUG=false

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# ============================================================================
# SECURITY & DEPLOYMENT
# ============================================================================

# Do not commit your actual .env file to version control
# Add "*.env" and ".env" to your .gitignore file
# Use this template as reference for required variables